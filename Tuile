package Netwalk;

import Outils.Data;

//Représente une tuile du plateau
public class Tuile {

    private int code;           
    private boolean feuille;    
    private boolean serveur;    
    private boolean visitee;    

    public Tuile(int code) {
        this(code, false, false, false);
    }


    public Tuile(int code, boolean feuille, boolean serveur, boolean visitee) {
        this.code = code;
        this.feuille = feuille;
        this.serveur = serveur;
        this.visitee = visitee;
    }


    public int getCode() { return code; }
    public void setCode(int code) { this.code = code; }

    public boolean isFeuille() { return feuille; }
    public void setFeuille(boolean feuille) { this.feuille = feuille; }

    public boolean isServeur() { return serveur; }
    public void setServeur(boolean serveur) { this.serveur = serveur; }

    public boolean isVisitee() { return visitee; }
    public void setVisitee(boolean visitee) { this.visitee = visitee; }

    // --- Méthodes pour les rotations

    public void rotationDroite() {
        int codetuile = this.code & 8; 
        this.code = (this.code << 1) & 15; 
        if (codetuile != 0) {
            this.code |= 1; 
        }
    }

    public void rotationGauche() {
        int codetuile = this.code & 1;
        this.code = (this.code >> 1);
        if (codetuile != 0) {
            this.code |= 8;
        }
    }

    @Override
    public String toString() {
        String representation = (code >= 0 && code < Data.asciiGraphic.length) 
                                ? Data.asciiGraphic[code] 
                                : "   ";

        // Ajout des couleurs selon le type de tuile (rouge si serveur et vert si feuille)
        if (serveur) {
            return Data.RED + representation + Data.RESET;
        }
        if (feuille) {
            return Data.GREEN + representation + Data.RESET;
        }
        return representation;
    }
}
